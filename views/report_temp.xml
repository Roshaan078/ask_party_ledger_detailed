<odoo>
    <template id="report_party_ledger">
        <!-- <t t-set="datetime" t-value="__import__('datetime')"/> -->
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.internal_layout">
                    <div class="page">
                        <h3>Party Ledger:
                            <span t-esc="o.name"/>
                        </h3>

                        <p>
                            <span style="margin-right:5px;">From:</span>
                            <span t-esc="datetime.datetime.strptime(data['form']['date_from'], '%Y-%m-%d').strftime('%d/%m/%Y')"
                                  style="margin-right:15px;"/>
                            <span style="margin-right:5px;">To:</span>
                            <span t-esc="datetime.datetime.strptime(data['form']['date_to'], '%Y-%m-%d').strftime('%d/%m/%Y')"/>
                        </p>

                        <table class="table table-condensed table-sm" border="1"
                               style="width:100%; border-collapse: collapse;">
                            <thead>
                                <tr>
                                    <th style="width:85px; white-space:nowrap; border:1px solid #000;">Date</th>
                                    <th style="border:1px solid #000;">Journal</th>
                                    <th style="border:1px solid #000;">Document</th>
                                    <th style="border:1px solid #000;">Product</th>
                                    <th class="text-right" style="border:1px solid #000;">Quantity</th>
                                    <th class="text-right" style="border:1px solid #000;">Unit Price</th>
                                    <th class="text-right" style="border:1px solid #000;">Debit</th>
                                    <th class="text-right" style="border:1px solid #000;">Credit</th>
                                    <th class="text-right" style="border:1px solid #000;">Balance</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="doc_title" t-value=""/>
                                <t t-foreach="get_lines(data, o)" t-as="line">
                                    <tr>
                                        <td style="white-space:nowrap; border:1px solid #000;"><span t-esc="line['date'].strftime('%d/%m/%Y')"/></td>
                                        <td style="border:1px solid #000;"><span t-esc="line['journal']"/></td>
                                        <t t-if="doc_title == line['document']">
                                            <td style="border-top:1px solid white !important"></td>
                                        </t>
                                        <t t-else="">
                                            <td style="border:1px solid #000;">
                                                <span class="fw-bold" t-esc="line['document']"/>
                                            </td>
                                        </t>
                                        <td style="border:1px solid #000;"><span t-esc="line['product'] or ''"/></td>
                                        <td class="text-end" style="border:1px solid #000;"><t t-esc="'{:,.2f}'.format(line['quantity'] or 0)"/></td>
                                        <td class="text-end" style="border:1px solid #000;"><t t-esc="'{:,.2f}'.format(line['price_unit'] or 0)"/></td>
                                        <td class="text-end" style="border:1px solid #000;"><t t-esc="'{:,.0f}'.format(line['debit'] or 0)"/></td>
                                        <td class="text-end" style="border:1px solid #000;"><t t-esc="'{:,.0f}'.format(line['credit'] or 0)"/></td>
                                        <td class="text-end" style="border:1px solid #000;"><t t-esc="'{:,.0f}'.format(line['running_balance'] or 0)"/></td>
                                    </tr>
                                    <t t-set="doc_title" t-value="line['document']"/>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
